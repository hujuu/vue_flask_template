(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-16bd1d92"],{"4cd7":function(t,e,a){},"72ba":function(t,e,a){"use strict";a("4cd7")},e1b0:function(t,e,a){"use strict";a.r(e);var s=a("c6a6"),i=a("8336"),c=a("b0af"),o=a("99d9"),n=a("62ad"),l=a("a523"),d=a("169a"),r=a("ce7e"),h=a("132d"),u=a("da13"),m=a("1800"),k=a("8270"),f=a("5d23"),p=a("0fd9"),g=a("2fa4"),_=a("71d9"),v=a("2a7f"),b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"kanboard"},[e(l["a"],[e(p["a"],[e(n["a"],{attrs:{cols:12}},[e(s["a"],{attrs:{items:t.getProjectList,label:"Select Project"},on:{change:t.handleProjectChange},model:{value:t.project_id,callback:function(e){t.project_id=e},expression:"project_id"}})],1),t._l(t.getTaskStatus,(function(a){return[e(n["a"],{key:a.value},[e(c["a"],{attrs:{loading:t.loading}},[e(_["a"],{attrs:{flat:""}},[e(v["b"],[t._v(t._s(a.text)+" ")]),e(g["a"]),e(i["a"],{attrs:{icon:""},on:{click:t.handleCreateTask}},[e(h["a"],[t._v("mdi-plus")])],1)],1),e(r["a"]),e(o["b"],{staticClass:"task-list",attrs:{id:"task-list__"+a.value,"data-status":a.value}},[t._l(t.getTaskByStatus(a.value),(function(a){return[e("div",{key:a.id,staticClass:"task-list__item",attrs:{"data-id":a.id}},[e(u["a"],{attrs:{value:a}},[e(k["a"],[a.owner?e("c-avatar",{attrs:{size:32,username:a.owner,src:t.computeAvatar(a.owner)}}):e(h["a"],[t._v("mdi-account-circle")])],1),e(f["a"],[e(f["c"],[t._v(" #"+t._s(a.id)+" "+t._s(a.name))]),e(f["b"],[t._v(t._s(a.description))])],1),e(m["a"],[e(h["a"],{attrs:{small:""},on:{click:function(e){return e.stopPropagation(),t.handleEditItem(a)}}},[t._v("mdi-pencil")])],1)],1)],1)]}))],2)],1)],1)]}))],2)],1),e(d["a"],{attrs:{scrollable:"",width:"840"},model:{value:t.showDialog,callback:function(e){t.showDialog=e},expression:"showDialog"}},[e("task-form",{attrs:{item:t.selectedItem},on:{"form:success":t.handleFormSuccess}})],1)],1)},w=[],T=a("2f62"),j=a("f126"),I=a("5ee3"),D=a("aa47"),S=a("aa7e"),x={name:"KanBoard",components:{CAvatar:j["a"],TaskForm:I["a"]},mixins:[S["a"]],data(){return{project_id:1,showDialog:!1,loading:!1,items:[],selectedItem:null,actions:[{text:"Edit Item",icon:"mdi-pencil",click:this.handleEditItem},{text:"Delete Item",icon:"mdi-close",click:this.handleDeleteItem}]}},computed:{...Object(T["b"])(["getTaskStatus","getProjectList"])},created(){this.$store.dispatch("fetchProject"),this.fetchTask(),this.$nextTick(()=>{this.getTaskStatus.forEach(t=>{new D["b"](document.querySelector("#task-list__"+t.value),{group:"shared",animation:150,onEnd:t=>{const e=t.item.dataset.id,a=t.to.dataset.status;this.$store.dispatch("updateTaskStatus",{id:e,status:a})}})})})},methods:{fetchTask(){this.items=[],this.loading=!0;const t={"filter[project_id]":this.project_id};this.$store.dispatch("fetchTask",t).then(t=>{this.items=t.data,this.loading=!1}).catch(()=>{this.loading=!1})},computeAvatar(t){const e=this.getUsername===t?this.getAvatar:"";return e},handleProjectChange(){this.fetchTask()},getTaskByStatus(t){return this.items.filter(e=>e.status===t)},handleCreateTask(){this.selectedItem=null,this.showDialog=!0},handleEditItem(t){this.selectedItem=t,this.showDialog=!0},handleDeleteItem({id:t}){window.confirm("Are you sure to delete this")&&this.$store.dispatch("deleteTask",t).then(()=>{this.items=this.items.filter(e=>e.id!=t)})},handleFormSuccess(){this.fetchTask(),this.showDialog=!1}}},C=x,P=(a("72ba"),a("2877")),y=Object(P["a"])(C,b,w,!1,null,"b7b53e0c",null);e["default"]=y.exports}}]);
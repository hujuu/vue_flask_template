(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0414437d"],{"36ff":function(t,e,a){},6817:function(t,e,a){"use strict";a.r(e);var i=a("2bc5"),s=a("8336"),n=a("a609"),o=a("b0af"),c=a("99d9"),r=a("62ad"),l=a("a523"),d=a("ce7e"),m=a("132d"),u=a("adda"),h=a("8860"),p=a("da13"),f=a("1800"),v=a("8270"),_=a("5d23"),g=a("1baa"),x=a("34c3"),b=a("e449"),k=a("f774"),w=a("8e36"),y=a("0fd9"),I=a("2fa4"),C=a("e0c7"),R=a("8654"),S=a("71d9"),P=a("3a2f"),j=function(){var t=this,e=t._self._c;return e("div",{staticClass:"media_manager"},[e(S["a"],{staticClass:"media_manager_toolbar",attrs:{tag:"div"}},[e(i["a"],{staticClass:"mr-4",attrs:{items:t.breadcrumbs}}),e(R["a"],{attrs:{flat:"","hide-details":"",solo:"",width:"250","prepend-icon":"mdi-magnify",label:"search files, folders",placeholder:"search"}}),e(s["a"],{attrs:{icon:"",value:"refresh"},on:{click:t.handleRefresh}},[e(m["a"],[t._v("mdi-refresh")])],1),e(s["a"],{attrs:{icon:"",value:"upload"}},[e(m["a"],[t._v("mdi-upload")])],1),e(n["a"],{attrs:{tile:"",dense:"",mandatory:""},model:{value:t.viewMode,callback:function(e){t.viewMode=e},expression:"viewMode"}},[e(s["a"],{attrs:{icon:"",value:"grid"}},[e(m["a"],[t._v("mdi-view-grid")])],1),e(s["a"],{attrs:{icon:"",value:"list"}},[e(m["a"],[t._v("mdi-view-list")])],1)],1)],1),t.loading?[e(w["a"],{attrs:{value:"15",indeterminate:""}})]:[e(l["a"],[e(y["a"],["list"===t.viewMode?[e(r["a"],{attrs:{cols:12}},[e(h["a"],{staticClass:"media_manager__list"},[e(g["a"],{attrs:{color:"primary"},model:{value:t.selectedItem,callback:function(e){t.selectedItem=e},expression:"selectedItem"}},[t._l(t.items,(function(a,i){return[e(p["a"],{key:i,attrs:{value:a,"two-line":"",exact:""},on:{click:function(e){return t.handleSelectItem(a)}}},[e(v["a"],[e("svg",{staticClass:"icon",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":t.computeIcon(a)}})])]),e(_["a"],[e(_["c"],{domProps:{textContent:t._s(a.basename)}}),e(_["b"],[t._v(" "+t._s("file"==a.type?t.computeSize(a.size):"")+" ")])],1),e(f["a"],[e(b["a"],{scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(s["a"],t._g({attrs:{icon:""}},t.onTooltip({...i,...a})),[e(m["a"],[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e("span",[t._v("Action")])])]}}],null,!0)},[e(h["a"],{staticClass:"pa-0",attrs:{dense:""}},t._l(t.actions,(function(i){return e(p["a"],{key:i.text,on:{click:function(t){return t.stopPropagation(),i.click(a)}}},[e(x["a"],{staticClass:"mr-2"},[e(m["a"],{attrs:{small:""}},[t._v(t._s(i.icon))])],1),e(_["c"],[t._v(t._s(i.text))])],1)})),1)],1)],1)],1),e(d["a"],{key:"d"+i})]}))],2)],1)],1)]:[t._l(t.items,(function(a){return[e(r["a"],{key:a.basename,attrs:{cols:3}},[e(o["a"],{attrs:{tile:""},on:{click:function(e){return t.handleSelectItem(a)}}},["file"===a.type&&"png"===a.extension?[e(u["a"],{attrs:{src:a.url,height:"200px"}})]:[e(u["a"],{attrs:{height:"200px"}},[e("svg",{staticClass:"icon icon-64 center-align",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":t.computeIcon(a)}})])])],e(d["a"]),e(c["a"],{staticClass:"pa-0"},[e(h["a"],{staticClass:"flex pa-0",attrs:{tile:"","two-line":""}},[e(p["a"],{},[e(_["a"],[e(_["c"],{domProps:{textContent:t._s(a.basename)}}),e(_["b"],[t._v(" "+t._s("file"==a.type?t.computeSize(a.size):"")+" ")])],1),e(f["a"],[e(b["a"],{scopedSlots:t._u([{key:"activator",fn:function({on:a}){return[e(P["a"],{attrs:{bottom:""},scopedSlots:t._u([{key:"activator",fn:function({on:i}){return[e(s["a"],t._g({attrs:{icon:""}},t.onTooltip({...i,...a})),[e(m["a"],[t._v("mdi-dots-vertical")])],1)]}}],null,!0)},[e("span",[t._v("Action")])])]}}],null,!0)},[e(h["a"],{staticClass:"pa-0",attrs:{dense:""}},t._l(t.actions,(function(i){return e(p["a"],{key:i.text,on:{click:function(t){return t.stopPropagation(),i.click(a)}}},[e(x["a"],{staticClass:"mr-2"},[e(m["a"],{attrs:{small:""}},[t._v(t._s(i.icon))])],1),e(_["c"],[t._v(t._s(i.text))])],1)})),1)],1)],1)],1)],1)],1)],2)],1)]}))]],2)],1)],e(k["a"],{attrs:{app:"",right:"","hide-overlay":"",clipped:"","clipped-right":""},model:{value:t.showRight,callback:function(e){t.showRight=e},expression:"showRight"}},[t.selectedItem?e("div",[e(S["a"],{staticClass:"border-bottom",attrs:{flat:""}},[e(C["a"],[t._v(t._s(t.selectedItem.path))]),e(I["a"]),e(s["a"],{attrs:{icon:""},on:{click:function(e){t.showRight=!1}}},[e(m["a"],[t._v("mdi-close")])],1)],1),e("div",[e(o["a"],{attrs:{flat:""}},["file"===t.selectedItem.type&&"png"===t.selectedItem.extension?[e(u["a"],{attrs:{src:t.item.url,height:"200px"}})]:[e(u["a"],{attrs:{height:"200px"}},[e("svg",{staticClass:"icon icon-64 center-align",attrs:{"aria-hidden":"true"}},[e("use",{attrs:{"xlink:href":t.computeIcon(t.selectedItem)}})])])]],2),e(d["a"]),e(h["a"],[e(p["a"],[e(_["b"],{domProps:{textContent:t._s(t.selectedItem.basename)}})],1),e(p["a"],[e(_["b"],{domProps:{textContent:t._s(t.selectedItem.dirname||"/")}})],1),e(p["a"],[e(_["b"],{domProps:{textContent:t._s(t.computeSize(t.selectedItem.size))}})],1)],1)],1)],1):t._e()])],2)},$=[],z=a("aa7e"),M=a("80d2"),q=a("2f62"),D={name:"MediaView",components:{},mixins:[z["a"]],data(){return{showRight:!1,viewMode:"list",selectedItem:null,icons:{txt:"mdi-format-text",json:"mdi-code-json",html:"mdi-language-html5",png:"mdi-image",svg:"mdi-svg"},loading:!1,items:[],actions:[{text:"Share",icon:"mdi-heart",click:this.$emit("file:share")},{text:"Download",icon:"mdi-download",click:this.$emit("file:download")},{text:"Delete",icon:"mdi-delete",click:this.$emit("file:delete")}]}},computed:{...Object(q["b"])(["getIconByExt"]),breadcrumbs(){const t=[{text:"Root",to:"/media/file",exact:!0,disabled:!1}],{path:e}=this.$route.query,a=e?e.split("/"):[],i=e?a.map((t,e)=>{const i=a.slice(0,e+1).join("/");return{text:t,to:"/media/file?path="+i,exact:!0,disabled:!1}}):[];return t.concat(i)}},watch:{"$route.query":{handler(t){this.fetchRecord(t)},immediate:!0}},methods:{fetchRecord(t){this.loading=!0,this.items=[],this.$store.dispatch("fetchDir",t).then(({data:t})=>{this.loading=!1,this.items=t}).catch(()=>{this.loading=!1})},computePath(t){return"dir"===t.type&&{path:"/media",query:{path:t.path}}},computeIcon(t){return"dir"===t.type?"#icon-wenjianjia":this.getIconByExt(t.extension)},computeSize(t){return t?Object(M["x"])(t):""},handleRefresh(){this.fetchRecord(this.$route.query)},handleSelectItem(t){"dir"===t.type?(this.selectedItem=null,this.$router.push(this.computePath(t))):(this.selectedItem=t,this.showRight=!0)}}},O=D,T=(a("9528"),a("2877")),A=Object(T["a"])(O,j,$,!1,null,"73043d09",null);e["default"]=A.exports},9528:function(t,e,a){"use strict";a("36ff")},aa7e:function(t,e,a){"use strict";e["a"]={methods:{onTooltip(t){return t}}}}}]);